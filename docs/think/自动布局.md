# 自动布局

自动布局的逻辑（非绝对、相对定位），仅考虑矩形，其他 deco 或者形状不考虑，不考虑间距。

有以下元素类型：兄弟元素、父元素、子元素

兄弟元素新增方向为竖直或水平（正序还是逆序应该可以很方便推广，先考虑正序）

先不考虑正交轴的大小变化，先看同轴的变化对周围元素的影响。也就是说，如果元素在水平方向上新增，那我们考虑的元素大小变化也是水平方向的，暂时不考虑竖直方向的变化。

对于元素的大小可变性，一种是不可变、固定的，一种是可变，可变存在默认大小，最小，最大这些值，超过范围会让元素退化为不可变。

元素还有压缩增长属性，这个是自动布局的自动部分。在上面的范围下，根据空间可用性自动压缩或增长。

#0 子元素和等于父元素

#1 子元素固定 父元素固定

#1.1 子元素和小于父元素，可能考虑对齐等问题。

#1.2 子元素和大于父元素，通常考虑 overflow 属性，滚动或裁切，还有一种是 warp，即换行

#2 子元素可变 父元素固定

排除掉部分固定的子元素，父元素也同时排除掉，这样就只有全部可变的子元素和固定的父元素。

#2.1 子元素和小于父元素，考虑存在增长的子元素，自动分配剩余的空间直到变为#0。某些间距也是元素，比如 qt 的弹簧或者 flex growl。

如果增长的元素有最大值，并且是在增长过程中触及的（也就是没到父元素边界），退化为#1.1

#2.2 子元素和大于父元素，考虑存在压缩的子元素，自动压缩直到#0。

如果压缩的元素有最小值，可能会退化为#1.2（那换行应该一开始就考虑了，直到无法换行才压缩）

#3 子元素固定 父元素可变

一般考虑父元素等于子元素之和#0，最简单的，除非父元素有最大最小值，按情况退化为#1.1 或#1.2

#4 子元素可变 父元素可变

同样先刨除固定的子元素部分，剩下纯粹和可变元素。

把子元素的默认大小认为是子元素的固定值，退化为#3

当父元素触及范围变为固定，考虑的是#2.1 和#2.2

尚未讨论充分如计算方向等问题。

尽管 css 被人诟病，但他的自动布局（flex）与 flutter 和 qt 是存在类似的。

在 css 中 `overflow` 的默认值是 `scroll`，这是考虑到文档显示。但在现代布局中，设置为`overflow: hidden`可能更好。只有语义化的列表才设置为滚动。

考虑到种种自定义行为，我们的桌面可能要自己处理滚动。
